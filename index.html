<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="src/index.js"></script>
</head>

<body>
    <div id="helloWorldApp"></div>
    <script>
        var refreshHelloWorld;

        `
        Hello, {=ctx.name}!
        <input [value]="{=ctx.name}" (input)="ctx.name = $event.target.value">
        <button (click)="ctx.name = 'World'">Reset name</button>
        `;
        function helloWorldApp(rf, ctx) {
            if (rf & 0b01 /* RenderFlags.Create */) {
                elementStart(0, "h1"); {
                    text(1);
                }
                elementEnd(0);
                element(2, "input");
                listener(2, 0, "input");
                elementStart(3, "button"); {
                    listener(3, 0, "click", );
                    text(4, "Reset name");
                }
                elementEnd(3);
            }
            if (rf & 0b10 /* RenderFlags.Update */) {
                textContent(1, `Hello, ${ctx.name}`);
                listenerRefresh(2, 0, ($event) => {
                    // extracted from a template - start
                    ctx.name = $event.target.value;
                    // extracted from a template - end
                    // TODO(pk): super-hacky, needs a proper solution here
                    refreshHelloWorld(ctx);
                });
                elementProperty(2, 1, "value", ctx.name);
                listenerRefresh(3, 0, () => {
                    ctx.name = 'World';
                    refreshHelloWorld(ctx);
                });
            }
        }

        refreshHelloWorld = render(document.getElementById('helloWorldApp'), helloWorldApp, { name: 'World' });
    </script>
    <hr>
    <div id="clockApp"></div>
    <script>

        `<h1>{=date.getHours()}:{=date.getMinutes()}:{=date.getSeconds()}</h1>`
        function clockApp(rf, date) {
            if (rf & 0b01 /* RenderFlags.Create */) {
                elementStart(0, "h1");
                text(1);
                elementEnd(0);
            }
            if (rf & 0b10 /* RenderFlags.Update */) {
                textContent(1, `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`);
            }
        }

        var refreshClock = render(document.getElementById('clockApp'), clockApp, new Date());
        setInterval(() => {
            refreshClock(new Date());
        }, 1000);
    </script>
</body>

</html>